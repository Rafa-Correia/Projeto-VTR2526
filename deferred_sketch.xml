<project name="proj" width="1920" height="1080">

    <assets>

        <attributes>
            <attribute type="RENDERER" name="LINE_SCALE"  data="FLOAT" value="6" />
            <attribute type="RENDERER" name="LINE_WIDTH"  data="FLOAT" value="0.15" />
            <attribute type="RENDERER" name="JITTER"      data="FLOAT" value="0.10" />
            <attribute type="RENDERER" name="CONTRAST"    data="FLOAT" value="1.50" />
            <attribute type="RENDERER" name="PAPER_GRAIN" data="FLOAT" value="0.03" />

            <attribute type="RENDERER" name="HATCH_T1"    data="FLOAT" value="0.1" />
            <attribute type="RENDERER" name="HATCH_T2"    data="FLOAT" value="0.3" />
            <attribute type="RENDERER" name="HATCH_T3"    data="FLOAT" value="0.5" />
            <attribute type="RENDERER" name="HATCH_T4"    data="FLOAT" value="0.7" />
            <attribute type="RENDERER" name="HATCH_TW"    data="FLOAT" value="0.30" />

            <attribute type="RENDERER" name="ROTATION_1"  data="FLOAT" value="0" />
            <attribute type="RENDERER" name="ROTATION_2"  data="FLOAT" value="90" />
            <attribute type="RENDERER" name="ROTATION_3"  data="FLOAT" value="45" />
            <attribute type="RENDERER" name="ROTATION_4"  data="FLOAT" value="135" />

            <attribute type="RENDERER" name="SPACING_JITTER"  data="FLOAT" value="0.15" />

            <!-- Edge detection -->
            <attribute name="depthThreshold" type="RENDERER" data="FLOAT" value="0.15" />
            <attribute name="normalThreshold" type="RENDERER" data="FLOAT" value="0.05" />
            <attribute name="edgeOpacity" type="RENDERER" data="FLOAT" value="1" />
            <attribute name="edgeColor" type="RENDERER" data="VEC4" r="0" g="0" b="0" a="0.0" />

        </attributes>

        <scenes>
            <scene name="mainScene">
                <file name="models/Cake.obj" />
            </scene>
            <scene name="sphere">
                <file name="models/sphere.obj" />
            </scene>
        </scenes>

        <viewports>
            <viewport name="mainViewport">
				<CLEAR_COLOR r="0.0" g="0.0" b="0.0" />
            </viewport>
        </viewports>

        <cameras>
            <camera name="mainCam">
                <viewport name="mainViewport" />
                <POSITION x="50" y="50" z="30" />
                <LOOK_AT_POINT x="0" y="0" z="0" />
                <UP x="0" y="1" z="0" />
            </camera>
        </cameras>

        <lights>
            <light name="simple_point">
                <POSITION x="50" y="50" z="30" />
            </light>
        </lights>

        <materialLibs>
            <materialLib filename="deferred_sketch.mlib" />
        </materialLibs>
    </assets>

    <pipelines>
        <pipeline name="basic" class="default">

            <pass name="gbufferPass">

                <scenes>
                    <scene name="mainScene" />
                </scenes>

                <camera name="mainCam" />
                <viewport name="mainViewport" />

                <renderTarget name="gbuffer2"
                            fromLibrary="matLib" />

                <materialMaps>
                    <map fromMaterial="*"
                        toLibrary="matLib"
                        toMaterial="gbufferMaterial" />
                </materialMaps>

            </pass>

            <pass name="sketchPass" class="quad">

                <renderTarget name="sketch_buf"
                            fromLibrary="matLib" />

                <viewport name="mainViewport" />
                <camera name="mainCam" />

                <material name="deferredSketchMaterial"
                        fromLibrary="matLib" />

            </pass>

            <pass name="edgePass" class="quad">

                <COLOR_CLEAR value="false" />

                <viewport name="mainViewport" />
                <camera name="mainCam" />

                <material name="edgeMaterial"
                        fromLibrary="matLib" />

            </pass>

        </pipeline>
    </pipelines>

    <interface>
        <window label="Sketch Controls">

            <var label="Line Scale"
                type="RENDERER"
                context="CURRENT"
                component="LINE_SCALE"
                def="min=1 max=200" />

            <var label="Line Width"
                type="RENDERER"
                context="CURRENT"
                component="LINE_WIDTH"
                def="min=0.01 max=0.30" />

            <var label="Jitter"
                type="RENDERER"
                context="CURRENT"
                component="JITTER"
                def="min=0.0 max=1" />

            <var label="Contrast"
                type="RENDERER"
                context="CURRENT"
                component="CONTRAST"
                def="min=0.4 max=3.0" />

            <var label="Paper Grain"
                type="RENDERER"
                context="CURRENT"
                component="PAPER_GRAIN"
                def="min=0.0 max=0.30" />

            <var label="Hatch T1"
                type="RENDERER" 
                context="CURRENT" 
                component="HATCH_T1"
                def="min=0.0 max=1.0" />

            <var label="Hatch T2"
                type="RENDERER" 
                context="CURRENT" 
                component="HATCH_T2"
                def="min=0.0 max=1.0" />

            <var label="Hatch T3"
                type="RENDERER" 
                context="CURRENT" 
                component="HATCH_T3"
                def="min=0.0 max=1.0" />

            <var label="Hatch T4"
                type="RENDERER" 
                context="CURRENT" 
                component="HATCH_T4"
                def="min=0.0 max=1.0" />

            <var label="Hatch Transition Width"
                type="RENDERER" 
                context="CURRENT" 
                component="HATCH_TW"
                def="min=0.01 max=1.0" />

            <var label="Rotation 1"
                type="RENDERER" 
                context="CURRENT" 
                component="ROTATION_1"
                def="min=0.0 max=180.0" />

            <var label="Rotation 2"
                type="RENDERER" 
                context="CURRENT" 
                component="ROTATION_2"
                def="min=0.0 max=180.0" />

            <var label="Rotation 3"
                type="RENDERER" 
                context="CURRENT" 
                component="ROTATION_3"
                def="min=0.0 max=180.0" />

            <var label="Rotation 4"
                type="RENDERER" 
                context="CURRENT" 
                component="ROTATION_4"
                def="min=0.0 max=180.0" />

            <var label="Spacing Jitter"
                type="RENDERER" 
                context="CURRENT" 
                component="SPACING_JITTER"
                def="min=0.0 max=1" />

        </window>

        <window label="Edge Detection Params">

            <var label="Depth Edge threshold"
                type="RENDERER"
                context="CURRENT"
                component="depthThreshold"
                def="min=0 max=1" />

            <var label="Normal Edge threshold"
                type="RENDERER"
                context="CURRENT"
                component="normalThreshold"
                def="min=0 max=1" />

            <var label="Edge Opacity"
                type="RENDERER"
                context="CURRENT"
                component="edgeOpacity"
                def="min=0 max=1" />

            <var label="Edge Color"
                type="RENDERER"
                context="CURRENT"
                component="edgeColor"
                mode="COLOR" />

        </window>
    </interface>

</project>
